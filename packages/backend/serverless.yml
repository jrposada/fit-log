service: fit-log

frameworkVersion: '3'

plugins:
  - serverless-esbuild
  - serverless-offline
  - serverless-prune-plugin

package:
  individually: true

custom:
  # serverless-prune-plugin
  prune:
    automatic: true
    includeLayers: true
    number: 1

  # Serverless
  convention:
    functions:
      folders:
        - src/api
      pattern:
        - '*-handler.yml'
    resources:
      folders:
        - cloudformation
        - src/api
      pattern:
        - '*-role.yml'
        - '*-resources.yml'
  included: ${file(../../node_modules/serverless-convention/index.js)}

provider:
  memorySize: 128
  name: aws
  region: eu-west-3
  runtime: nodejs20.x
  stage: ${opt:stage, 'test'}

functions:
  - ${self:custom.included.functions}
resources:
  - ${self:custom.included.resources}
